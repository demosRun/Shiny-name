<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <title>{TAG_14226_TAG}</title>
    <!-- 页面的元信息 -->
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"/>
    <meta name="format-detection" content="telephone=no, email=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="white"/>
    <meta name="renderer" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="filetype" content="1"/>
    <meta name="publishedtype" content="1"/>
    <meta name="pagetype" content="2"/>
    <meta name="screen-orientation" content="landscape"/>
    <meta name="x5-orientation" content="landscape"/>
    <meta name="full-screen" content="yes"/>
    <meta name="x5-fullscreen" content="true"/>
    <meta name="browsermode" content="application"/>
    <meta name="x5-page-mode" content="app"/>
    
      <!-- 页面主样式文件 -->
      <link charset="utf-8"  rel="stylesheet" href="./static/css/owo.core.css">
      
    <!-- 附属css文件 -->
    <link rel="stylesheet" href="./static/css/main.css" charset="utf-8">
      
  </head>
  <body>
    <div class="scale-box"><!-- 页面区域 -->
    <!-- 页面[loading]-->
    <div class="loading-box page" template="loading" style="display: none;"><img class="loading owo-animation-shrink" src="./static/resource/loadingLogo.png" o-animation="shrink" o-tap="owo.go({noBack: true,page: 'videoPlay'})"><div class="loading-bar"><div class="num-bar"></div></div><div class="num">0%</div><img class="play-button" src="./static/resource/play.png" go="videoPlay/////true"></div>
    <!-- 页面[videoPlay]-->
    <div class="video-play page" template="videoPlay" style="display: none;"><video src="./static/resource/video.mp4" x5-playsinline="true" x5-video-player-fullscreen="true" preload="auto" x5-video-orientation="landscape" playsinline="true" webkit-playsinline="true" x-webkit-airplay="true" x5-video-player-type="h5"></video></div>
    <!-- 页面[name]-->
    <div class="name page" template="name" style="display: none;"><img class="so so-0 owo-animation-shrink" src="./static/resource/334.png" o-animation="shrink"><img class="so so-1" src="./static/resource/372.png"><img class="so so-2" id="heartBig" src="./static/resource/373.png"><img class="so so-3" src="./static/resource/374.png"><img class="so so-4" src="./static/resource/375.png" go="videoPlay/////true"><img class="so so-5 owo-animation-flicker" src="./static/resource/325.png" o-animation="flicker"><img class="so so-6" src="./static/resource/377.png"><img class="so so-7 owo-animation-shrink" src="./static/resource/320.png" o-animation="shrink" go="page1/////true"><div class="fabulous-text"><div class="scoreboard" template="scoreboard"><div class="scoreboard-item"> </div></div><div class="text">人点赞</div></div><canvas id="canvasBg"></canvas></div>
    <!-- 页面[page1]-->
    <div class="page-1 page" template="page1" style="display: none;"><img class="so so-2" src="./static/resource/202.png"><img class="so so-3" src="./static/resource/275.png"><img class="so so-4" src="./static/resource/200.png" go="page2/////true"><img class="so so-5" src="./static/resource/196.png" go="name/////true"><img class="so so-6" src="./static/resource/276.png"><img class="so so-7" src="./static/resource/277.png"><img class="so so-8" src="./static/resource/189.png"><img class="so so-9" src="./static/resource/188.png"><select class="select-bar" o-change="changeSelect"><option value="./static/resource/poster-1.jpg">这声“美女”，不是恭维</option><option value="./static/resource/poster-2.jpg">坚持就是胜利，曙光就在前方</option><option value="./static/resource/poster-3.jpg">谢谢你为湖北拼过命</option><option value="./static/resource/poster-4.jpg">这是期待已久的道别</option><option value="./static/resource/poster-5.jpg">昨日逆行武汉，今朝胜利凯旋</option><option value="./static/resource/poster-6.jpg">“过水门”，为回家的英雄们接风洗尘</option></select><div class="go-number"><span>全国</span><span id="goNum">42000</span><span>多名医护人员驰援武汉</span></div><div class="like-number"><span>共有</span><span id="likeNum">2324212</span><span>份敬意献给援鄂医疗队</span></div></div>
    <!-- 页面[page2]-->
    <div class="share page" template="page2" style="display: none;"><div class="so so-0" id="showBox"><img id="showImg" src="./static/resource/poster-1.jpg"><div class="text-bar"><h2>全国42000多名医护人员驰援武汉</h2><h2><span>共有</span><span id="likeNum2">233300</span><span>份敬意献给援鄂医疗队</span></h2></div></div><img class="user-show-img" id="userShowImage"><img class="so so-1" src="./static/resource/246.png" go="page1/////true"><img class="so so-2" src="./static/resource/232.png"><img class="so so-3" src="./static/resource/228.png" o-tap="window.location.replace('')"><img class="so so-4" src="./static/resource/273-2.png"></div>
    <!-- 页面[playMusic]-->
    <div class="music-menu owo-block" template="playMusic" style="display: none;"><img class="music-icon" src="https://cunchu.site/ozzx/resource/music.png" o-tap="switchPlay"></div></div>
    

    <script src="http://tools.people.com.cn/libs/jquery/1.11.1/jquery-1.11.1.min.js" type="text/javascript"  charset="UTF-8"></script>
    <script src="./static/js/main.js" type="text/javascript"  charset="UTF-8"></script>
    <script src="https://cunchu.site/owo/plug/autoScale.js" type="text/javascript"  charset="UTF-8"></script>
    <!-- 框架script文件 -->
    <script src="./static/js/owo.core.js" type="text/javascript" charset="UTF-8"></script>
<script>
owo.script = {
  "loading": {
    "data": {
      "imgList": [""]
    },
    "show": function show() {
      var mum = owo.query('.num')[0];
      var numBar = owo.query('.num-bar')[0];
      this.preloadImages(this.data.imgList, function (e) {
        setTimeout(function () {
          owo.query('.play-button')[0].style.display = 'block';
        }, 500);
      }, function (num) {
        numBar.style.width = num + '%';
        mum.innerHTML = num + '%';
      });
    },
    "preloadImage": function preloadImage(src, successFn) {
      var image = new Image();
      image.src = src;

      image.onload = function () {
        successFn && successFn(src);
      };

      image.onerror = function (error) {
        successFn && successFn(src);
      };
    },
    "preloadImages": function preloadImages(srcs, doneFn, progressFn) {
      var _this = this;

      if (!Array.isArray(srcs)) {
        console.log('第一个参数只能是一个数组');
      } else {
        var allCount = srcs.length;
        var doneCount = 0;
        srcs.forEach(function (srcItem) {
          _this.preloadImage(srcItem, function () {
            doneCount++;
            progressFn && progressFn(Math.ceil(100 * doneCount / allCount));

            if (doneCount === allCount) {
              doneFn && doneFn();
            }
          });
        });
      }
    }
  },
  "videoPlay": {
    "show": function show() {
      owo.script.playMusic.pause();
      var videoItem = this.$el.getElementsByTagName('video')[0];
      videoItem.play();
      videoItem.addEventListener("ended", function () {
        owo.go({
          noBack: true,
          page: "name"
        });
        owo.script.playMusic.play();
      });
    }
  },
  "name": {
    "data": {
      "fabulousNumber": 12457,
      "renderer": null,
      "scene": null,
      "camera": null,
      "lastNumber": null
    },
    "created": function created() {
      var _this2 = this;

      draw(); // this.creatBG()
      // setTimeout(() => {
      //   owo.tool.notice('点击屏幕为Ta们点赞!')
      // }, 1200);
      // 不断获取点赞信息

      setInterval(function () {
        $.ajax({
          url: 'http://19diaocha.people.cn/20190605/json.php?type=647',
          dataType: 'jsonp',
          success: function success(res) {
            if (res[0]) {
              if (_this2.data.lastNumber !== res[0].bnum) {
                _this2.data.lastNumber = res[0].bnum;

                _this2.template.scoreboard.changeText(_this2.data.lastNumber);
              }
            }
          }
        });
      }, 2000);
      this.template.scoreboard.changeText(this.data.fabulousNumber);
      var heartClock = null;
      owo.tool.heart(this.$el, function () {
        owo.id.heartBig.classList.add('heart-ani'); // 发送点赞请求

        $.ajax({
          url: 'http://littlepoll1.people.com.cn/button/index.php/cip/button/647/63229',
          dataType: 'jsonp'
        });
        if (heartClock) clearTimeout(heartClock);
        heartClock = setTimeout(function () {
          heartClock = null;
          owo.id.heartBig.classList.remove('heart-ani');
        }, 1000);
      });
    },
    "template": {
      "scoreboard": {
        "data": {
          "changing": false
        },
        "changeText": function changeText(text) {
          var _this3 = this;

          // 限制刷新频率
          if (this.data.changing) return;
          var firstChild = this.$el.children[0];
          this.data.changing = true;
          var newEl = document.createElement('div');
          newEl.classList.add('scoreboard-item');
          newEl.innerHTML = text;
          this.$el.appendChild(newEl);
          newEl.style.top = "40px";
          setTimeout(function () {
            firstChild.style.top = "-40px";
            newEl.style.top = "0";
            setTimeout(function () {
              firstChild.remove();
              _this3.data.changing = false;
            }, 500);
          }, 100);
        }
      }
    }
  },
  "page1": {
    "created": function created() {
      owo.id.likeNum.innerText = owo.script.name.data.lastNumber || 514273;
      owo.tool.toast('下拉框可以选择致敬的内容');
      owo.animate('fadeInLeft', owo.query('.so-3')[0]);
    },
    "changeSelect": function changeSelect() {
      var value = this.$target.value;

      if (value && owo.id.showImg) {
        owo.id.showImg.src = value;
      }
    }
  },
  "page2": {
    "show": function show() {
      owo.id.likeNum2.innerText = owo.script.name.data.lastNumber || 514273;
      owo.id.userShowImage.src = '';
      setTimeout(function () {
        html2canvas(owo.id.showBox).then(function (canvas) {
          owo.id.userShowImage.src = canvas.toDataURL("image/png");
        });
      }, 800);
    }
  },
  "playMusic": {
    "data": {
      "music": null,
      "musicIsPlay": false
    },
    "switchPlay": function switchPlay() {
      this.data.musicIsPlay ? this.pause() : this.play();
    },
    "play": function play() {
      console.log('播放音乐');

      if (!this.data.musicIsPlay) {
        this.data.musicIsPlay = true;
        this.data.music = new Audio("https://cunchu.site/ozzx/resource/bg.mp3"); // this.data.music.volume = 0.2

        this.data.music.loop = true;
        this.data.music.play();
        var icon = document.getElementsByClassName('music-icon')[0];
        icon.src = 'https://cunchu.site/ozzx/resource/music.png';
        icon.classList.add('active');
      }
    },
    "pause": function pause() {
      if (this.data.musicIsPlay) {
        this.data.musicIsPlay = false;
        this.data.music.pause();
        var icon = document.getElementsByClassName('music-icon')[0];
        icon.src = 'https://cunchu.site/ozzx/resource/music.png';
        icon.classList.remove('active');
      }
    }
  }
};
owo.globalAni = {
  "in": "moveToLeftFade",
  "out": "moveFromRightFade",
  "backIn": "moveToRightFade",
  "backOut": "moveFromLeftFade"
};</script>
  </body>
</html>

    <script src="./static/js/heart.js.js" type="text/javascript"  charset="UTF-8"></script>
    <script src="./static/js/html2canvas.min.js.js" type="text/javascript"  charset="UTF-8"></script>
    <script src="./static/js/toast.js.js" type="text/javascript"  charset="UTF-8"></script>
    <script src="./static/js/notice.js.js" type="text/javascript"  charset="UTF-8"></script>
    <script src="http://politics.people.com.cn/img/MAIN/2019/08/119609/js/three.min.js" type="text/javascript"  charset="UTF-8"></script>
    <script src="./static/js/STLLoader.js.js" type="text/javascript"  charset="UTF-8"></script>
    <script src="./static/js/pointCloud.js.js" type="text/javascript"  charset="UTF-8"></script>